@use 'sass:map';
@use 'sass:math';
@use 'colors' as c;
@use 'typography' as t;
@use 'spacing' as s;
@use 'flex' as f;
@use 'contrast';

// ==========================================================================
// Axel Framework - Buttons
// Description: Comprehensive button styles for the Axel CSS framework.
// Supports multiple variants (solid, outline, ghost, link, soft, gradient,
// neumorphic) for all colors, with sizes, states, groups, and utilities.
// Ensures WCAG 2.1 accessibility and crushes Bootstrap with advanced features.
// Author: Farzad Asgari
// Version: 1.0.0
// ==========================================================================


// --------------------------------------------------------------------------
// Button Variables
// Core configuration for button styles, transitions, and accessibility.
// Example usage: transition: $button-transition;
// --------------------------------------------------------------------------
$button-transition: all 0.2s ease-in-out;
$button-outline-width: 2px;
$button-hover-opacity: 0.9;
$button-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
$button-neumorphic-shadow: 4px 4px 8px rgba(0, 0, 0, 0.1), -4px -4px 8px rgba(255, 255, 255, 0.5);
$button-min-touch-target: s.$min-touch-target-size; // 44px for WCAG 2.1


// --------------------------------------------------------------------------
// Button Sizes
// Defines padding, font-size, and border-radius for button sizes.
// Supports responsive variants via breakpoints.
// Example usage: .btn-sm { padding: map.get(map.get($button-sizes, sm), padding); }
// --------------------------------------------------------------------------
$button-sizes: (
  xs: (
    padding: map.get(s.$spacings, 1) map.get(s.$spacings, 2), // 4px 8px
    font-size: map.get(t.$font-sizes, xs), // 12px
    border-radius: 0.25rem,
    min-height: $button-min-touch-target // 44px
  ),
  sm: (
    padding: map.get(s.$spacings, 2) map.get(s.$spacings, 3), // 8px 16px
    font-size: map.get(t.$font-sizes, sm), // 14px
    border-radius: 0.375rem,
    min-height: $button-min-touch-target
  ),
  md: (
    padding: map.get(s.$spacings, 3) map.get(s.$spacings, 4), // 16px 24px
    font-size: map.get(t.$font-sizes, base), // 16px
    border-radius: 0.5rem,
    min-height: $button-min-touch-target
  ),
  lg: (
    padding: map.get(s.$spacings, 4) map.get(s.$spacings, 5), // 24px 32px
    font-size: map.get(t.$font-sizes, lg), // 18px
    border-radius: 0.625rem,
    min-height: 48px
  ),
  xl: (
    padding: map.get(s.$spacings, 5) map.get(s.$spacings, 6), // 32px 40px
    font-size: map.get(t.$font-sizes, xl), // 20px
    border-radius: 0.75rem,
    min-height: 52px
  )
);


// --------------------------------------------------------------------------
// Base Button Styles
// Core styles applied to all buttons, ensuring consistency and accessibility.
// Example usage: .btn { display: inline-flex; }
// --------------------------------------------------------------------------
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-family: map.get(t.$font-families, primary);
  font-weight: 500;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
  border: 0;
  outline: none;
  transition: $button-transition;
  box-sizing: border-box;
  min-height: map.get(map.get($button-sizes, md), min-height);
  padding: map.get(map.get($button-sizes, md), padding);
  font-size: map.get(map.get($button-sizes, md), font-size);
  border-radius: map.get(map.get($button-sizes, md), border-radius);
  line-height: 1.5;
  position: relative; // For loading spinner
  box-shadow: $button-shadow;

  // Accessibility
  &:focus {
    outline: 3px solid rgba(map.get(c.$colors, primary), 0.5);
    outline-offset: 2px;
  }

  // Disabled state
  &:disabled,
  &.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    box-shadow: none;
  }

  // Loading state
  &.loading {
    pointer-events: none;
    position: relative;
    color: transparent !important;

    &::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 16px;
      border: 2px solid currentColor;
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }
  }
}


// Keyframes for loading spinner
@keyframes spin {
  to { transform: rotate(360deg); }
}