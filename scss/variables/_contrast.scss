@use 'sass:math';
@use 'sass:color';

// ==========================================================================
// Axel Framework - Contrast
// Description: Utility functions for calculating text color based on background
// luminance and ensuring WCAG 2.1 contrast ratios for accessibility.
// Author: Farzad Asgari
// Version: 1.0.0
// ==========================================================================


// --------------------------------------------------------------------------
// Luminance Calculation
// Calculates relative luminance of a color per WCAG 2.1.
// Returns a value between 0 (black) and 1 (white).
// Example usage: $lum: luminance(#AF47D2);
// --------------------------------------------------------------------------
@function luminance($color) {
  $r: math.div(color.channel($color, 'red', $space: rgb), 255);
  $g: math.div(color.channel($color, 'green', $space: rgb), 255);
  $b: math.div(color.channel($color, 'blue', $space: rgb), 255);

  $rs: if($r <= 0.03928, $r / 12.92, math.pow(($r + 0.055) / 1.055, 2.4));
  $gs: if($g <= 0.03928, $g / 12.92, math.pow(($g + 0.055) / 1.055, 2.4));
  $bs: if($b <= 0.03928, $b / 12.92, math.pow(($b + 0.055) / 1.055, 2.4));

  @return 0.2126 * $rs + 0.7152 * $gs + 0.0722 * $bs;
}
